User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
User: "U1ZQR43RB"
----------------------------------------------------------------------------------------------------
Time: "1970-01-18 00:38:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
Time: "1970-01-18 00:40:00"
----------------------------------------------------------------------------------------------------
Text: "<@U0MFNAG05> has joined the channel"
Text: "<@U0KK0T3CG> has joined the channel"
Text: "<@U0MFNAG05> set the channel purpose: Discussion about all physics project related stuff"
Text: "<@U1ZQR43RB> has joined the channel"
Text: "Hong, let\u2019s move our discussion here"
Text: "Ok no problem"
Text: "This channel is being imported from the #physics_consulting channel. It may be used while the import is going on, and I'll let you know here when it completes."
Text: "<!channel>: The import of this channel from the #physics_consulting channel is complete."
Text: "new link to google doc resent"
Text: "just post it to this channel"
Text: "Ok"
Text: "we try to avoid emails"
Text: "had to send that for google doc permission :slightly_smiling_face:"
Text: ""
Text: "Hong, can you send me a link where DeltaPSU shows their HVPS"
Text: "I can\u2019t seem to find it"
Text: "I\u2019ve updated the working hours record, to indicated billable and unbillable (overhead) hours.  Please concur"
Text: "Ok"
Text: "For the HVPS from DeltaPSU I got the information from one of my friends, they only told me that it can be customized"
Text: "I see"
Text: "Maybe worth asking a little more, I just don\u2019t see anything that says high voltage"
Text: "looks like low voltage din rail supplies"
Text: "Yeah because they are not mainly focus on HVPS"
Text: "I'll ask my friend for more info"
Text: "Thanks"
Text: "Hong, I need your help with something"
Text: "Here is the Excel spreadsheet to calculate the coil currents to circulate the beam on the beam stop:"
Text: ""
Text: "It\u2019s designed to update the current every 2.2 micro-seconds. You can find it in row 6, column B (in red)"
Text: "Unfortunately, the best we can hope is the ability to update the current every 100 micro-seconds"
Text: "I\u2019ve tried to simply change the number, but it messes up the track"
Text: "Can you find the way to change the number to 100 us and also shorten the `Path Length` (row 7, column B) to about `20 ms`"
Text: "The `Number of Points` (row 8, column B) should be 10,000"
Text: "Let me know if you have any questions"
Text: "Ok I'll start working on it"
Text: "thanks"
Text: "Vitaliy, in this excel file I am not supposed to change constant values right?"
Text: "which ones in particular?"
Text: "ADC Lag (atick) I mean"
Text: "Well, it shouldn\u2019t effect the magnet currents"
Text: "ADC is the read back"
Text: "Do you feel that you have to in order to make it work?"
Text: "Nope, I am still clarifying all functions in this table and try to understand it"
Text: "see if you can keep it constant"
Text: "Hong, you might find this useful"
Text: "Thanks, I think I got some idea to fix this"
Text: "excellent"
Text: ""
Text: "Vitaliy is this what you want?"
Text: "Looks good"
Text: "Can you make a new excel spreadsheet and post it?"
Text: "sure"
Text: "Actually that's how I fixed it"
Text: "I made a new one and changed all dTick related functions"
Text: "ok"
Text: "how long is the `Path Length` now?"
Text: "20 ms"
Text: ""
Text: "oh wait, I forgot to change the npoint here"
Text: "waiting"
Text: "I will resend a new one when I fixed that"
Text: "ok"
Text: "meanwhile, since I have to leave soon for few hours"
Text: "here is the LTspice model:"
Text: "ok"
Text: ""
Text: "Can you load it up"
Text: "file loaded successfully"
Text: "And then open V1 and first load DX into the it and run it and then load DY into it and also run it"
Text: "Produce the plots of V1, Vn001, Ig1, where Vn001 is the voltage at L1 and Ig1 is the current at G1"
Text: "For this you need to save the DY into the text file like this one:"
Text: ""
Text: "got it"
Text: "where the first value is the time in milisecond, thus m at the end"
Text: "and the second column is the value of the current you got on your spreadsheet"
Text: "post all results here"
Text: "as well as updated excel spreadsheet"
Text: "Ok"
Text: "Vitaliy, I have a question about the npoint to the revised version"
Text: "Do you have time before you leave or we can discuss it later if you want"
Text: "What's up?  Wireless is shitty here"
Text: "I think the npoints is calculated by dtick and path length, if we set dtick to 100us and path length to 20ms, then npoint will be 200 by the calculation"
Text: "If the internet connection is not good then we can discuss it later if you want"
Text: "I'll figure out how to let npoint to be 10k as you want"
Text: "Ye, absolutely"
Text: "Lowere the number of points"
Text: "then we'll go with 200 npoints first?"
Text: "Yup"
Text: "ok, got it"
Text: "We will expand it later, but for now let's go with 20 Ms"
Text: "Ok"
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: ""
Text: "I also made plots from the original DyBeamStopWaveForm you gave me"
Text: "Can you put the traces on the same graph"
Text: "Also limit the simulation time to 20 Ms"
Text: "I should be more specific: can you put V, Vn001 and Ig1 on the same plot"
Text: "And have one plot for each DY and DX"
Text: "Ok"
Text: "I'll do that right after finished my lunch "
Text: "Bon appetite "
Text: "Thank you:grin:"
Text: ""
Text: ""
Text: "Since IV1 and IG1 are all in current unit, it is hard to tell the IV1 curve in the same plot with IG1"
Text: "I think it should be just v1"
Text: "hmmm"
Text: "That's the set voltage on the controller"
Text: "But I didn't have that waveform in my visible trace options"
Text: ""
Text: "ok sorry, it would be Vn002"
Text: "the wire right outside of the V1 unit"
Text: "Oh,"
Text: ""
Text: "Anyway to close this small gap?"
Text: ""
Text: "Let me figure it out"
Text: "That gap is because of the small number of npoint"
Text: "ok, good"
Text: "Please add Ig1 back in and reduce the simulation time to 20 ms"
Text: "it\u2019s in the one of the settings"
Text: "right now it\u2019s 80 ms"
Text: "oh sorry, I totally forgot that"
Text: "no problem"
Text: "And I just fixed that gap"
Text: "great !!!"
Text: "do you need only the curve without gap or the whole excel file?"
Text: "Next is to find the way to save these traces as data points, do you think there is any way to do that"
Text: ""
Text: "Just update the spreadsheet and post it, thanks"
Text: "got it"
Text: "oh, you are ahead of me"
Text: ":smile:"
Text: "Vitaliy, what do you mean by add IG1 back in?"
Text: "Never mind, I just didn\u2019t see it"
Text: "the traces have similar colors"
Text: "ignore"
Text: "Oh okay"
Text: ""
Text: ""
Text: "And I got all data points for these plots as well"
Text: "Do you want it separately (Vn001, Vn002, and IG1) or all together in the same txt file as DX and DY?"
Text: "Can you plot them the same way you had a plot for DY vs DX"
Text: "All three traces on the same plot"
Text: "Yeah but what I mean is about the export format"
Text: "time\tV(n001)\tV(n002)\tI(G1)\n0.000000000000000e+000\t-9.126000e-001\t-2.600000e+000\t-2.600000e+000"
Text: "This will be the one with all data sets"
Text: "Do you want it to be separated?"
Text: "You can add these traces to the spread sheet"
Text: "Ok"
Text: "Then I'll put them all together in a single spread sheet"
Text: "Stop time: 20ms, max timestep: .1m"
Text: "Can you make a plot of VX(n001) vs VY(n001) and so on"
Text: "Once you don with that. Here is another spreadsheet:"
Text: "no problem"
Text: ""
Text: "Do you want them to be in the same plot as well?"
Text: "I mean Vn001, Vn002 and IG1"
Text: "Yes, if possible"
Text: "The ideas is that the beam will dwell on the circular path that we looked at for 20 ms and the move to one of the targets in the above spread sheet and stay there for 7 ms and move back to the circular path and then go to the next target and so on"
Text: "Can you take the waveforms that you\u2019ve created and place them between these 19 points"
Text: "and stretch out the currents for the 19 point for 7 ms with 0.1 ms for each point, i.e. 70 exactly the same points for each of these"
Text: "you should have the wave form of 19*(7+20)/0.1 = 5130 points for 513 ms time"
Text: "feel free to ask any questions"
Text: "Vitaliy, I got one problem"
Text: "The data exported from LTspice, since I set maximum timestep to be 0.1 ms, it still automatically generated timestep less than the maximum timestep"
Text: "can you set a minimum?"
Text: "I can try"
Text: "Hmm, looks like we can't set a fixed timestep to the simulation"
Text: "It is decided by simulation engine based on the circumstance to the circuit"
Text: "intersting"
Text: "even the input  voltage is resampled?"
Text: "I'm not sure what it did to our input voltage.."
Text: "ok, then it is what it is"
Text: "Can we take the output of the LTspice and resample onto our input sampling rate"
Text: "just do a linear interpolation, doesn\u2019t need to be in excel, matlab is good for it"
Text: "Or how about this, we muliply input voltage for 19 times, and add 7ms 0 input between it and run it as a new input on LTspice?"
Text: "But I'm not sure what would happened this way though :stuck_out_tongue:"
Text: "I can still go with Matlab solution"
Text: "Not sure I understand, I though I did, but..."
Text: "The problem you are having is with the new task not the old"
Text: "The simple circular path is ok?"
Text: "yes"
Text: "yes to which one :slightly_smiling_face:?"
Text: "my understanding to simple circular path?"
Text: "I'm not quite sure now..."
Text: "so, what I\u2019m saying is take the output for the circular path and resample it to the input sampling"
Text: "19 times referst to adding the target path, which is a separate task"
Text: "Now we need a new waveforms with 19 times what I have got and 7ms something between each other?"
Text: "My first understanding to that \"something\" is the exact value at 20ms of each waveform for whole 7ms"
Text: "Am I correct?"
Text: "No, 19 constant current intervals for 7 ms each and 20 ms circular waveforms between them"
Text: "Then what would be the value of that constant current?"
Text: "Sorry, Hong.  Didn\u2019t see your question"
Text: "the constant current is the current in the second spreadsheet that I posted"
Text: "<@U0MFNAG05> pinned their Excel Spreadsheet <https://logicalinn.slack.com/files/U0MFNAG05/F21H9GGBD/coilcurrents_29.40_target_paths.xlsx|CoilCurrents 29.40 target paths.xlsx> to this channel."
Text: "I just pinned it"
Text: "okay, I'll go look for it"
Text: "Target #\tDipole X\tDipole Y\n\tAmp\tAmp\n\t\t\n1\t1.201\t-4.742\n2\t1.312\t-5.178\n3\t1.443\t-5.697\n4\t1.602\t-6.323"
Text: "Is this the constant current you mentioned?"
Text: "the first two elements in the table of Coil constants"
Text: "It\u2019s in the gray box"
Text: "yeah that's the place I'm looking at"
Text: "great"
Text: "So I'll put Dipole X, Y Amp as the current for each interval"
Text: "And what about the unit to these current?"
Text: "Okay I think it supposed to be A not mA"
Text: "ye, everything is in Amps"
Text: "Got it"
